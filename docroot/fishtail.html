<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en" xmlns:z="http://www.hekkelman.com/libzeep/m2">
<head z:replace="~{head :: head(~{::title}, ~{}, ~{::script})}">

	<title>Fishtail Plot - Phenosaurus</title>

	<script src="/scripts/screen.js" type="application/ecmascript" z:src="@{/scripts/screen.js}"></script>
</head>
<body>
	<nav z:replace="menu :: menu"></nav>

	<div class="container-fluid mt-3">
		<div class="option-row">
			<div class="option-col option-col-screenselector">
				<div class="input-group input-group-sm">
					<select id="screenList" data-placeholder="Choose a Screen...">
						<option value=""></option>
						<option z:each="screen: ${screens}" z:attr="data-screen=${screen.name}"
							z:text="${screen.name}" z:selected="${screen.name==#request.getParameter('screen')}"></option>
					</select>
				</div>
			</div>

			<div class="option-col" z:insert="~{gene-selection::gene-selection-dialog(screenType)}"></div>

			<div class="option-col">
				<div class="input-group input-group-sm">

					<form name="graphTypeForm">
						<div class="btn-group btn-group-toggle btn-group-sm" role="group" data-toggle="buttons">
							<label class="btn btn-secondary active">
								<input type="radio" name="graphType" autocomplete="off"
									data-type="regular" checked="checked"/>Regular
							</label>

							<label class="btn btn-secondary">
								<input type="radio" name="graphType" data-type="unique"
									autocomplete="off"/>Unique
							</label>

							<label class="btn btn-secondary">
								<input type="radio" name="graphType" data-type="low" autocomplete="off"/>Low
							</label>

							<label class="btn btn-secondary">
								<input type="radio" name="graphType" data-type="high" autocomplete="off"/>High
							</label>
						</div>
					</form>

				</div>
			</div>

			<div class="option-col">
				<div class="input-group input-group-sm">
					<div class="input-group-prepend">
						<label class="input-group-text" for='pv-cut-off'>p-value</label>
					</div>
					<input type="number" min="0" max="1" step="0.01" id="pv-cut-off" maxlength="8" size="5"
							placeholder="0.05"
							class="form-control" value="0.05"/>
				</div>
			</div>

			<div class="option-col">
				<div class="input-group input-group-sm">
					<input type="text" id="highlightGene" size="10"
						placeholder="Enter genename..."
						z:value="${#request.getParameter('gene')}"
						class="form-control form-control-sm"/>

					<div class="input-group-append" id="button-addon4">
						<button type="button" class="btn btn-sm btn-outline-secondary" id="btn-highlight-gene">Highlight</button>
						<button type="button" class="btn btn-sm btn-outline-secondary" id="btn-clear-highlight">Clear</button>
					</div>
				</div>	
			</div>

			<div class="option-col">
				
				<div z:replace="gene-info :: geneDiv('ip')"></div>
				<!-- <div z:replace="geneinfo :: geneDiv('ip')"></div> -->
				<label>
					<button type="button" class="btn btn-sm btn-secondary" id="show-gene-info">Gene Info</button>
				</label>

			</div>

			<div class="option-col">
				<div class="input-group input-group-sm">
					<button class="btn btn-primary btn-sm" id="reload-btn">Reload</button>
				</div>
			</div>
		</div>

		<div class="plot-title mt-2">
			<span class="loading"><i class="fa fa-circle-notch fa-spin" style="font-size: 24px"></i> Loading
				screen <span class="screen-name"></span>...</span>
			<span class="loaded">Fishtail plot for <span class="screen-name"></span></span>
			<span class="failed">Fishtail plot for <span class="screen-name"></span> could not be loaded.
				<span id="plot-status-error-text"></span></span>
		</div>

		<div class="plot-container">
			<svg width="100%" height="90%" id="plot" class="fishtail"></svg>
		</div>

		<div id="genome-viewer-container">
			<!-- <svg width="100%" height="60" id="genome-viewer"></svg> -->
		</div>

		<div class="row mt-2">
			<div class="col-6">
				<h5>Negative regulators</h5>
				<table class="table table-hover table-sm">
					<thead>
						<tr>
							<th>relgene</th>
							<th>low</th>
							<th>high</th>
							<th>fcpv</th>
							<th>log2(MI)</th>
						</tr>
					</thead>
					<tbody id="negative-regulators">
					</tbody>
				</table>
			</div>

			<div class="col-6">
				<h5>Positive regulators</h5>
				<table class="table table-hover table-sm">
					<thead>
						<tr>
							<th>relgene</th>
							<th>low</th>
							<th>high</th>
							<th>fcpv</th>
							<th>log2(MI)</th>
						</tr>
					</thead>
					<tbody id="positive-regulators">
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<!-- <div z:replace="~{contextMenu :: contextMenuNav(_)}"></div> -->
	<div z:replace="contextMenu :: contextMenuNav"></div>
	<div z:replace="contextMenu :: genomeViewerContextMenuNav"></div>

	<footer z:replace="footer :: content"></footer>

</body>

</html>