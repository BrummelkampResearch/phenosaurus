<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en" xmlns:z="http://www.hekkelman.com/libzeep/m2">

<head z:replace="~{head :: head(~{::title}, ~{}, ~{::script})}">

	<title>Fishtail Plot - Phenosaurus</title>

	<script src="/scripts/sl-screen.js" type="application/ecmascript" z:src="@{/scripts/sl-screen.js}"></script>
	<script src="/scripts/sortable.js" type="application/ecmascript" z:src="@{/scripts/sortable.js}"></script>

	<script z:inline="javascript">
		const screenReplicates = /*[[${screens}]]*/ null;
		const screenType = 'sl';
	</script>

</head>

<body>
	<nav z:replace="~{menu :: menu}"></nav>

	<div class="container-fluid mt-3">

		<div class="option-row">
			<div class="option-col" z:insert="~{gene-selection::gene-selection-dialog(screenType)}"></div>

			<div class="option-col">
				<div class="input-group input-group-sm">
					<input type="text" id="highlightGene" size="10" placeholder="Enter genename..." z:value="${#request.getParameter('gene')}"
						class="form-control form-control-sm"/>

					<div class="input-group-append" id="button-addon4">
						<button type="button" class="btn btn-sm btn-outline-secondary" id="btn-highlight-gene">Highlight</button>
						<button type="button" class="btn btn-sm btn-outline-secondary" id="btn-clear-highlight">Clear</button>
					</div>
				</div>	
			</div>

			<!-- <div class="option-col">
				<div class="btn-group btn-group-toggle btn-group-sm" data-toggle="buttons" id="selectSLTypeBtns">
					<label class="btn btn-secondary active">
						<input type="checkbox" name="selectSLType" id="synthetic-lethal" autocomplete="off" data-colortype="synthetic-lethal" class="graph-color-btn" checked="checked"/>Synthetic Lethal
					</label>
					<label class="btn btn-secondary">
						<input type="checkbox" name="selectSLType" id="suppressed-essential" autocomplete="off" data-colortype="suppressed-essential" class="graph-color-btn" checked="checked"/>Suppressed Essential
					</label>
					<label class="btn btn-secondary">
						<input type="checkbox" name="selectSLType" id="fitness-enhancer" autocomplete="off" data-colortype="fitness-enhancer" class="graph-color-btn" checked="checked"/>Fitness Enhancer
					</label>
				</div>
			</div> -->

			<div class="option-col">
				
				<div z:replace="gene-info :: geneDiv('sl')"></div>
				<label>
					<button type="button" class="btn btn-sm btn-secondary" id="show-gene-info">Show Gene Info Dialog</button>
				</label>

			</div>

			<div class="option-col">
				<div class="input-group input-group-sm">
					<div class="input-group-prepend">
						<label class="input-group-text" for='pv-cut-off'>p-value</label>
					</div>
					<input type="number" min="0" max="1" step="0.01" id="pv-cut-off" maxlength="8" size="5"
							class="form-control" value="0.05"/>
				</div>
			</div>

			<div class="option-col">
				<div class="input-group input-group-sm">
					<div class="input-group-prepend">
						<label class="input-group-text" for="binom_fdr">Binom_fdr</label>
					</div>
					<input type="number" min="0" max="1" step="0.01" id="binom_fdr" maxlength="4" size="3"
						value="0.05" class="form-control form-control-sm"/> 
				</div>
			</div>

			<div class="option-col">
				<div class="input-group input-group-sm">
					<div class="input-group-prepend">
						<label class="input-group-text" for="odds-ratio">Odds Ratio</label>
					</div>
					<input type="number" min="0" max="1" step="0.1" id="odds-ratio" maxlength="4" size="3"
						value="0.8" class="form-control form-control-sm"/> 
				</div>
			</div>

			<div class="option-col">
				<div class="input-group input-group-sm">
					<button class="btn btn-primary btn-sm" id="reload-btn">Reload</button>
				</div>
			</div>

		</div>

		<div class="row mt-3">
			<div class="col ml-3">
				<div class="row">
					<div class="col option-col-screenselector">
						<div class="input-group input-group-sm">
							<select id="screenList" data-placeholder="Choose a Screen...">
								<option value=""></option>\
								<option z:each="screen: ${screens}" z:attr="data-screen=${screen.name}"
								z:text="${screen.name}" z:selected="${screen.name==#request.getParameter('screen')}"></option>
							</select>
						</div>
					</div>

					<div class="col-2">
						<form class="replicateBtnForm">
							<div class="btn-group btn-group-toggle btn-group-sm replicate-btn-container" role="group" data-toggle="buttons">
								<label class="btn btn-secondary active">
									<input type="radio" name="replicate" autocomplete="off" data-replicate="1"
										checked="checked"/>1
								</label>

								<label class="btn btn-secondary">
									<input type="radio" name="replicate" data-replicate="2" autocomplete="off"/>2
								</label>

								<label class="btn btn-secondary">
									<input type="radio" name="replicate" data-replicate="3" autocomplete="off"/>3
								</label>

								<label class="btn btn-secondary">
									<input type="radio" name="replicate" data-replicate="4" autocomplete="off"/>4
								</label>
							</div>
						</form>
					</div>

					<div class="col">
						<div class="plot-title">
							<span class="loading"><i class="fa fa-circle-notch fa-spin" style="font-size: 24px"></i> Loading screen <span class="screen-name"></span>...</span>
							<span class="loaded">Synthetic lethal plot for <span class="screen-name"></span></span>
							<span class="failed">Synthetic lethal plot for <span class="screen-name"></span> could not be loaded.</span>
						</div>
					</div>
				</div>


				<div class="plot-container">
					<svg width="100%" height="100%" id="plot-screen" class="fishtail"></svg>
				</div>
			</div>
			<div class="col">
				<div class="row">
					<div class="col">
						<div class="option-col option-col-screenselector">
							<div class="input-group input-group-sm">
								<select id="screenListControl" data-placeholder="Choose a Screen...">
									<option value=""></option>\
									<option z:each="screen: ${screens}" z:attr="data-screen=${screen.name}"
									z:text="${screen.name}" z:selected="${screen.name==#request.getParameter('screen')}"></option>
								</select>
							</div>
						</div>
					</div>

					<div class="col-2">
						<form class="replicateBtnForm">
							<div class="btn-group btn-group-toggle btn-group-sm replicate-btn-container" role="group" data-toggle="buttons">
									<label class="btn btn-secondary active">
										<input type="radio" name="replicate" autocomplete="off" data-replicate="1"
											checked="checked"/>1
									</label>

									<label class="btn btn-secondary">
										<input type="radio" name="replicate" data-replicate="2" autocomplete="off"/>2
									</label>

									<label class="btn btn-secondary">
										<input type="radio" name="replicate" data-replicate="3" autocomplete="off"/>3
									</label>

									<label class="btn btn-secondary">
										<input type="radio" name="replicate" data-replicate="4" autocomplete="off"/>4
									</label>
								</div>
							
						</form>
					</div>

					<div class="col">
						<div class="plot-title">
							<span class="loading"><i class="fa fa-circle-notch fa-spin" style="font-size: 24px"></i> Loading screen <span class="screen-name"></span>...</span>
							<span class="loaded">Synthetic lethal plot for <span class="screen-name"></span></span>
							<span class="failed">Synthetic lethal for <span class="screen-name"></span> could not be loaded.</span>
						</div>
					</div>
				</div>


				<div class="plot-container">
					<svg width="100%" height="100%" id="plot-control" class="fishtail"></svg>
				</div>
			</div>
		</div>

		<div id="genome-viewer-container">
			<!-- <svg width="100%" height="60" id="genome-viewer"></svg> -->
		</div>

		<h5 class="mt-2">Significant Genes</h5>
		<table class="table table-hover table-sm sortable-table">
			<thead>
			<tr data-keytype="s|f|f|b|f|f|f|f|f|f|f|f|f">
				<th class="sortable">gene</th>
				<th class="sortable">odds ratio</th>
				<th class="sortable">senseratio</th>
				<th >insertions</th>
				<th class="sortable">binom_fdr</th>
				<th class="sortable">pv 1</th>
				<th class="sortable">fc-pv 1</th>
				<th class="sortable">pv 2</th>
				<th class="sortable">fc-pv 2</th>
				<th class="sortable">pv 3</th>
				<th class="sortable">fc-pv 3</th>
				<th class="sortable">pv 4</th>
				<th class="sortable">fc-pv 4</th>
			</tr>
			</thead>
			<tbody id="significantGenesTable">
			</tbody>
		</table>

	</div>

	<div z:replace="~{contextMenu :: contextMenuNav}"></div>

	<footer z:replace="~{footer :: content}"></footer>

</body>
</html>