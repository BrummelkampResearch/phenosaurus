<!DOCTYPE html SYSTEM "about:legacy-compat" [
<!ENTITY nbsp "&#160;">
]>
<html lang="en" xmlns:th="http://www.hekkelman.com/libzeep/m2" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head th:replace="head :: head(~{::title}, ~{}, ~{::script})">
    <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0" />
    <title>Welcome - Phenosaurus</title>

    <script src="/scripts/admin-group.js" th:src="@{/scripts/admin-group.js}" defer="defer"></script>
</head>

<body>
    <nav th:replace="~{menu :: menu}"></nav>
    <div class="container">
        <div class="container row mt-3 mb-3">
            <div class="col-10">
                <h1>Groups</h1>
            </div>
            <div class="col-1"><button id="add-group-btn" class="btn btn-primary">Add&nbsp;Group</button></div>
        </div>
        <table class="table table-sm table-striped">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Members</th>
                    <th colspan="2">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="group: ${groups}">
                    <td th:text="${group.name}"></td>
                    <td th:text="${#strings.listJoin(group.members, ', ')}"></td>
                    <td class="edit-group-btn" th:attr="data-id=${group.id}"><i class="fa fa-edit"></i></td>
                    <td class="delete-group-btn" th:attr="data-id=${group.id},data-name=${group.name}"><i class="fa fa-trash"></i></td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- The group editor dialog: -->
    <div id="group-dialog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-label">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="dialog-label">Group editor</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">Ã—</span></button>
                </div>
                <div class="modal-body">
                    <form id="group-edit-form" th:action="@{/admin/group}" method="post" name="group-edit-form">
                        <input type="hidden" name="id" value="" />
                        <div class="form-group row"><label for="id_groupname" class="col-sm-2 col-form-label">Name</label>
                            <div class="col-sm-10"><input class="form-control" id="id_groupname" maxlength="254" name="name"
                                    placeholder="Group name" type="text" required="" /></div>
                        </div>
                        <div class="form-group"><label for="selected-members">Members</label>
                            <!--                                            <select multiple class="form-control" id="selected-members">-->

                            <!--                                                    <option th:each="user: ${users}" th:text="${user.username}" th:value="${user.username}"></option>-->
                            <!--                                            </select>-->
                            <div class="group-members-table m-3">
                                <table class="table table-sm" id="selected-members">
                                    <tbody>
                                        <tr th:each="user: ${users}">
                                            <td><input type="checkbox" th:name="${user.username}" class="user-checkbox" />
                                            </td>
                                            <td th:text="${user.username}"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <!--<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
                    <button type="submit" form="group-edit-form" class="btn btn-primary">Save</button></div>
            </div>
        </div>
    </div>
    <footer th:replace="~{footer :: content}"></footer>
</body>
</html>